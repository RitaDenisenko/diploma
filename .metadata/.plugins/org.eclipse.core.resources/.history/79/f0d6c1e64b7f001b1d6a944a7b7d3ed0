package GitTools.GitRepoAnalysis;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Date;

import org.eclipse.jgit.blame.BlameResult;

public class App 
{	
	
	public static int countLinesNew(String filename) throws IOException {
	    InputStream is = new BufferedInputStream(new FileInputStream(filename));
	    try {
	        byte[] c = new byte[1024];

	        int readChars = is.read(c);
	        if (readChars == -1) {
	            // bail out if nothing to read
	            return 0;
	        }

	        // make it easy for the optimizer to tune this loop
	        int count = 0;
	        while (readChars == 1024) {
	            for (int i=0; i<1024;) {
	                if (c[i++] == '\n') {
	                    ++count;
	                }
	            }
	            readChars = is.read(c);
	        }

	        // count remaining characters
	        while (readChars != -1) {
	            System.out.println(readChars);
	            for (int i=0; i<readChars; ++i) {
	                if (c[i] == '\n') {
	                    ++count;
	                }
	            }
	            readChars = is.read(c);
	        }

	        return count == 0 ? 1 : count;
	    } finally {
	        is.close();
	    }
	}
	
    public static void main( String[] args ) throws Exception
    {
    	GitRepository gr = new GitRepository();
    	gr.init("C:/Users/MiPro/LetsDoStuff5");//("C:/Users/MiPro/Computer-graphics");
    	BlameResult br = gr.getBlameResultForFile("LetsDoStuff.Domain/LdsContext.cs");
    	int count = 0;
    	int length = countLinesNew("C:/Users/MiPro/LetsDoStuff5/LetsDoStuff.Domain/LdsContext.cs");
     	int i = 0;
     	while (length > i)
    	{    		
    		System.out.println(br.getSourceCommitter(i).getName());
    		//System.out.println(br.getSourceCommit(i).getCommitTime());
    		System.out.println(br.getSourceCommitter(i).getWhen());
    		/*if (br.getSourceCommit(i).getCommitTime())
    		{
    			
    		}
    		*/
    		i++;
    	};
    	
    }
}
